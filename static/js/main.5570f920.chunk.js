(this.webpackJsonpjoker=this.webpackJsonpjoker||[]).push([[0],{161:function(e,t){},395:function(e,t,n){},474:function(e,t){},475:function(e,t){},506:function(e,t){},516:function(e,t){},626:function(e,t){},730:function(e,t){},732:function(e,t){},762:function(e,t){},785:function(e,t){},787:function(e,t){},817:function(e,t){},818:function(e,t){},838:function(e,t,n){"use strict";n.r(t);var r,a=n(12),c=n(0),s=n.n(c),i=n(142),u=n.n(i),o=(n(395),n(47)),p=n(216),j=n(1),b=n.n(j),l=n(25),f=n(6),d=n(365),x=n.n(d),h=n(366),O=n.n(h),v=n(367),w=n(368),g=n.n(w),m=n(369),y=n.n(m),k=n(22),S=n.n(k),C=n(370),I=n.n(C),P=n(78),K=n.n(P),B=n(371),E=n.n(B),F=n(379),A=n(94),L=n(377),T=n(850),J=n(861),z=n(852),D=n(860),N=n(853),R=n(854),M=n(378),H=n(856),Q=n(857),U=n(858),W=n(39),q=n(46),G=function(){var e=Object(l.a)(b.a.mark((function e(t,n){var r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.keys.unmarshalPrivateKey(n.peerId.marshalPrivKey());case 2:return r=e.sent,a="",e.next=6,Object(q.pipe)(t.source,function(){var e=Object(l.a)(b.a.mark((function e(t){var n,c,s,i,u,o,p,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",c=!0,s=!1,e.prev=3,u=Object(W.a)(t);case 5:return e.next=7,u.next();case 7:return o=e.sent,c=o.done,e.next=11,o.value;case 11:if(p=e.sent,c){e.next=18;break}n+=p.toString("utf8");case 15:c=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),s=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,c||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:j=new Uint8Array(n.match(/.{1,2}/g).map((function(e){return parseInt(e,16)}))),a=(new TextDecoder).decode(r.decrypt(j));case 36:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(b.a.mark((function e(t,n,r,a){var c,s,i,u,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}return e.next=3,n.peerStore.get(r);case 3:if(c=e.sent,s=a.encrypt((new TextEncoder).encode(t)),i=s.reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),""),!(c&&c.addresses.length>0&&t&&n)){e.next=18;break}return e.prev=7,e.next=10,n.dialProtocol(r,["/encryptedChat/1.0"]);case 10:u=e.sent,o=u.stream,Object(q.pipe)(i,o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),X={modules:{transport:[O.a,I.a],connEncryption:[v.NOISE],streamMuxer:[y.a],pubsub:g.a},addresses:{listen:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star"]},config:{pubsub:{enabled:!0}}};function Y(){var e=s.a.useState(""),t=Object(f.a)(e,2),n=t[0],c=t[1],i=s.a.useState(),u=Object(f.a)(i,2),j=u[0],d=u[1],h=s.a.useState(!1),O=Object(f.a)(h,2),v=O[0],w=O[1],g=s.a.useState(""),m=Object(f.a)(g,2),y=m[0],k=m[1],C=s.a.useState(),I=Object(f.a)(C,2),P=I[0],B=I[1],W=s.a.useState(),q=Object(f.a)(W,2),Y=q[0],Z=q[1],$=s.a.useState([]),_=Object(f.a)($,2),ee=_[0],te=_[1],ne=s.a.useState(!1),re=Object(f.a)(ne,2),ae=re[0],ce=re[1],se=s.a.useState(!1),ie=Object(f.a)(se,2),ue=ie[0],oe=ie[1],pe=s.a.useState(!1),je=Object(f.a)(pe,2),be=je[0],le=je[1],fe=s.a.useState(!1),de=Object(f.a)(fe,2),xe=de[0],he=de[1],Oe=Object(T.a)(n).onCopy;s.a.useEffect((function(){we()}),[]);var ve=function(){var e=Object(l.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=8;break}return e.next=3,S.a.createFromPubKey(y);case 3:t=e.sent,n=K.a.keys.unmarshalPublicKey(t.marshalPubKey()),B(t),Z(n),oe(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(l.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,S.a.create({bits:1024,keyType:"RSA"});case 3:if(t=e.sent,n=Object(p.a)(Object(p.a)({},X),{},{peerId:t}),!r||!r.isStarted){e.next=8;break}return e.next=8,r.stop();case 8:return e.next=10,x.a.create(n);case 10:return r=e.sent,e.next=13,r.handle("/encryptedChat/1.0",function(){var e=Object(l.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stream,e.next=3,G(n,r);case 3:"#1512BA"===(a=e.sent)?le(!0):("#1512AB"===a||te((function(e){return[].concat(Object(o.a)(e),[{from:"them",message:a}])})),le(!1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.next=15,r.start();case 15:c(r.peerId.toJSON().pubKey),console.log("listening on: "+r.peerId.toB58String()),w(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(l.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(j,r,P,Y),te((function(e){return[].concat(Object(o.a)(e),[{from:"me",message:j}])})),d(""),he(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),me=function(){var e=Object(l.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(t.target.value),""===t.target.value||xe||(V("#1512BA",r,P,Y),he(!0)),""===t.target.value&&xe&&(V("#1512AB",r,P,Y),he(!1));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(J.b,{align:"center",w:"100vw",children:[!ue&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(z.a,{d:"flex",alignItems:"baseline",children:[Object(a.jsx)(D.a,{isLoaded:!v&&""!==n,children:Object(a.jsx)(A.a,{identifier:n})}),Object(a.jsx)(D.a,{isLoaded:!v&&""!==n,children:Object(a.jsxs)(z.a,{align:"center",children:[Object(a.jsx)(E.a,{value:n||""}),Object(a.jsx)(N.a,{mt:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",w:"200px",cursor:"pointer",onClick:Oe,children:r&&r.peerId.toJSON().pubKey})]})})]}),Object(a.jsxs)(z.a,{d:"flex",alignItems:"baseline",children:[Object(a.jsx)(D.a,{isLoaded:""!==y,children:Object(a.jsx)(A.a,{identifier:y})}),Object(a.jsxs)(z.a,{align:"center",children:[Object(a.jsx)(R.a,{height:"200px",width:"200px",value:y,placeholder:"Peer's Public Key",type:"password",onChange:function(e){return k(e.target.value)}}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(M.a,{onClick:ve,children:"Find a friend"}),Object(a.jsx)(M.a,{onClick:function(){return ce(!0)},children:"Read QR Code"})]})]})]})]}),ue&&Object(a.jsxs)(z.a,{children:[Object(a.jsxs)(z.a,{position:"absolute",height:"100%",w:"100vw",left:"0px",children:[ee.length>0&&ee.map((function(e){return Object(a.jsxs)(J.a,{children:[Object(a.jsx)(A.a,{identifier:"me"===e.from?n:y,size:48}),Object(a.jsx)(N.a,{children:e.message})]},e.message)})),be&&Object(a.jsxs)(J.a,{children:[Object(a.jsx)(A.a,{identifier:y,size:48}),Object(a.jsx)(D.a,{children:Object(a.jsx)(N.a,{children:"Some very long message!!! Hello!"})})]})]}),Object(a.jsxs)(J.a,{justifyContent:"center",spacing:3,position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(A.a,{identifier:n,size:48}),Object(a.jsx)(H.a,{opacity:"100%",bg:"white",placeholder:"Say something",maxWidth:"300px",value:j,onChange:function(e){return me(e)},onKeyPress:function(e){return"Enter"===e.key&&ge()}}),Object(a.jsx)(Q.a,{"aria-label":"send message",isDisabled:""===j||!P,onClick:ge,icon:Object(a.jsx)(L.a,{})})]})]}),Object(a.jsx)(U.a,{isOpen:ae,onClose:function(){return ce(!1)},children:Object(a.jsx)(U.d,{children:Object(a.jsx)(U.c,{children:Object(a.jsx)(U.b,{children:Object(a.jsx)(F.a,{delay:300,onError:function(e){return console.log(e)},onScan:function(e){k(e),e&&ce(!1)},style:{width:"100%"}})})})})})]})}var Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,863)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},$=n(859);u.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)($.a,{children:Object(a.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[838,1,2]]]);
//# sourceMappingURL=main.5570f920.chunk.js.map