(this.webpackJsonpjoker=this.webpackJsonpjoker||[]).push([[0],{143:function(e,t){},325:function(e,t,n){},406:function(e,t){},407:function(e,t){},438:function(e,t){},448:function(e,t){},558:function(e,t){},664:function(e,t){},666:function(e,t){},697:function(e,t){},716:function(e,t,n){"use strict";n.r(t);var r,a=n(21),c=n(0),s=n.n(c),u=n(125),i=n.n(u),o=(n(325),n(182)),p=n(1),l=n.n(p),d=n(23),b=n(6),f=n(299),j=n.n(f),x=n(300),h=n.n(x),O=n(301),v=n(302),k=n.n(v),w=n(303),y=n.n(w),g=n(19),S=n.n(g),m=n(304),C=n.n(m),I=n(73),P=n.n(I),K=n(305),E=n.n(K),T=n(310),F=n(729),J=n(740),L=n(731),N=n(738),B=n(737),D=n(732),M=n(739),R=n(734),A=n(735),z=n(35),Q=n(42),U=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var r,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.keys.unmarshalPrivateKey(n.peerId.marshalPrivKey());case 2:return r=e.sent,a="",e.next=6,Object(Q.pipe)(t.source,function(){var e=Object(d.a)(l.a.mark((function e(t){var n,c,s,u,i,o,p,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",c=!0,s=!1,e.prev=3,i=Object(z.a)(t);case 5:return e.next=7,i.next();case 7:return o=e.sent,c=o.done,e.next=11,o.value;case 11:if(p=e.sent,c){e.next=18;break}n+=p.toString("utf8");case 15:c=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),s=!0,u=e.t0;case 24:if(e.prev=24,e.prev=25,c||null==i.return){e.next=29;break}return e.next=29,i.return();case 29:if(e.prev=29,!s){e.next=32;break}throw u;case 32:return e.finish(29);case 33:return e.finish(24);case 34:d=new Uint8Array(n.match(/.{1,2}/g).map((function(e){return parseInt(e,16)}))),a=(new TextDecoder).decode(r.decrypt(d));case 36:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(t,n,r,a){var c,s,u,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}return e.next=3,n.peerStore.get(r);case 3:if(c=e.sent,s=a.encrypt((new TextEncoder).encode(t)),u=s.reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),""),!(c&&c.addresses.length>0&&t&&n)){e.next=18;break}return e.prev=7,e.next=10,n.dialProtocol(r,["/encryptedChat/1.0"]);case 10:i=e.sent,o=i.stream,Object(Q.pipe)(u,o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),G={modules:{transport:[h.a,C.a],connEncryption:[O.NOISE],streamMuxer:[y.a],pubsub:k.a},addresses:{listen:["/ip4/127.0.0.1/tcp/13579/wss/p2p-webrtc-star"]},config:{pubsub:{enabled:!0}}};function H(){var e=s.a.useState(""),t=Object(b.a)(e,2),n=t[0],c=t[1],u=s.a.useState(),i=Object(b.a)(u,2),p=i[0],f=i[1],x=s.a.useState(!1),h=Object(b.a)(x,2),O=h[0],v=h[1],k=s.a.useState(),w=Object(b.a)(k,2),y=w[0],g=w[1],m=s.a.useState(),C=Object(b.a)(m,2),I=C[0],K=C[1],z=s.a.useState(),Q=Object(b.a)(z,2),H=Q[0],V=Q[1],W=s.a.useState([]),X=Object(b.a)(W,2),Y=X[0],Z=X[1],$=s.a.useState(!1),_=Object(b.a)($,2),ee=_[0],te=_[1],ne=Object(F.a)(n).onCopy;s.a.useEffect((function(){y&&function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y){e.next=7;break}return e.next=3,S.a.createFromPubKey(y);case 3:t=e.sent,n=P.a.keys.unmarshalPublicKey(t.marshalPubKey()),K(t),V(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[y]);var re=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,S.a.create({bits:1024,keyType:"RSA"});case 3:if(t=e.sent,n=Object(o.a)(Object(o.a)({},G),{},{peerId:t}),!r||!r.isStarted){e.next=8;break}return e.next=8,r.stop();case 8:return e.next=10,j.a.create(n);case 10:return r=e.sent,e.next=13,r.handle("/encryptedChat/1.0",function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stream,e.next=3,U(n,r);case 3:a=e.sent,Z([a]);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.next=15,r.start();case 15:c(r.peerId.toJSON().pubKey),console.log("listening on: "+r.peerId.toB58String()),v(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(J.a,{align:"center",w:"100vw",children:[Object(a.jsx)(L.a,{children:"Inside Joke"}),Object(a.jsx)(N.a,{onClick:function(){return re()},children:"Start Node"}),Object(a.jsx)(N.a,{onClick:function(){return te(!0)},children:"Read QR Code"}),Object(a.jsxs)(J.a,{children:[Object(a.jsx)(L.a,{size:"sm",children:"Public Key"}),Object(a.jsx)(B.a,{isLoaded:!O&&""!==n,children:Object(a.jsx)(D.a,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",w:"200px",cursor:"pointer",onClick:ne,children:r&&r.peerId.toJSON().pubKey})}),Object(a.jsx)(B.a,{isLoaded:!O&&""!==n,children:Object(a.jsx)(E.a,{value:n||""})})]}),Object(a.jsx)(M.a,{value:y,placeholder:"Target Listener address",onChange:function(e){return g(e.target.value)}}),r&&r.isStarted&&Object(a.jsxs)(R.a,{children:[Object(a.jsx)(M.a,{value:p,onChange:function(e){return f(e.target.value)}}),Object(a.jsx)(N.a,{isDisabled:""===p||!I,onClick:function(){q(p,r,I,H),f("")},children:"Send Message"}),Y.length>0&&Y.map((function(e){return Object(a.jsx)(D.a,{children:e})}))]}),Object(a.jsx)(A.a,{isOpen:ee,onClose:function(){return te(!1)},children:Object(a.jsx)(A.d,{children:Object(a.jsx)(A.c,{children:Object(a.jsx)(A.b,{children:Object(a.jsx)(T.a,{delay:300,onError:function(e){return console.log(e)},onScan:function(e){g(e),e&&te(!1)},style:{width:"100%"}})})})})})]})}var V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,742)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},W=n(736);i.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(W.a,{children:Object(a.jsx)(H,{})})}),document.getElementById("root")),V()}},[[716,1,2]]]);
//# sourceMappingURL=main.074152a2.chunk.js.map