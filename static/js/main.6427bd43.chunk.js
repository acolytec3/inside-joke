(this.webpackJsonpjoker=this.webpackJsonpjoker||[]).push([[0],{158:function(e,t){},392:function(e,t,n){},471:function(e,t){},472:function(e,t){},503:function(e,t){},513:function(e,t){},623:function(e,t){},727:function(e,t){},729:function(e,t){},759:function(e,t){},782:function(e,t){},784:function(e,t){},814:function(e,t){},815:function(e,t){},835:function(e,t,n){"use strict";n.r(t);var r,a=n(17),c=n(0),s=n.n(c),i=n(140),u=n.n(i),o=(n(392),n(47)),p=n(213),b=n(1),f=n.n(b),l=n(26),j=n(6),d=n(362),x=n.n(d),h=n(363),O=n.n(h),v=n(364),w=n(365),m=n.n(w),y=n(366),g=n.n(y),k=n(22),S=n.n(k),C=n(367),P=n.n(C),I=n(78),K=n.n(I),E=n(368),F=n.n(E),T=n(376),J=n(214),L=n(374),B=n(849),D=n(859),N=n(851),R=n(857),A=n(852),M=n(858),W=n(375),z=n(854),Q=n(855),U=n(39),q=n(46),G=function(){var e=Object(l.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.a.keys.unmarshalPrivateKey(n.peerId.marshalPrivKey());case 2:return r=e.sent,a="",e.next=6,Object(q.pipe)(t.source,function(){var e=Object(l.a)(f.a.mark((function e(t){var n,c,s,i,u,o,p,b;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n="",c=!0,s=!1,e.prev=3,u=Object(U.a)(t);case 5:return e.next=7,u.next();case 7:return o=e.sent,c=o.done,e.next=11,o.value;case 11:if(p=e.sent,c){e.next=18;break}n+=p.toString("utf8");case 15:c=!0,e.next=5;break;case 18:e.next=24;break;case 20:e.prev=20,e.t0=e.catch(3),s=!0,i=e.t0;case 24:if(e.prev=24,e.prev=25,c||null==u.return){e.next=29;break}return e.next=29,u.return();case 29:if(e.prev=29,!s){e.next=32;break}throw i;case 32:return e.finish(29);case 33:return e.finish(24);case 34:b=new Uint8Array(n.match(/.{1,2}/g).map((function(e){return parseInt(e,16)}))),a=(new TextDecoder).decode(r.decrypt(b));case 36:case"end":return e.stop()}}),e,null,[[3,20,24,34],[25,,29,33]])})));return function(t){return e.apply(this,arguments)}}());case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(f.a.mark((function e(t,n,r,a){var c,s,i,u,o;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=18;break}return e.next=3,n.peerStore.get(r);case 3:if(c=e.sent,s=a.encrypt((new TextEncoder).encode(t)),i=s.reduce((function(e,t){return e+t.toString(16).padStart(2,"0")}),""),!(c&&c.addresses.length>0&&t&&n)){e.next=18;break}return e.prev=7,e.next=10,n.dialProtocol(r,["/encryptedChat/1.0"]);case 10:u=e.sent,o=u.stream,Object(q.pipe)(i,o),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(7),console.log(e.t0);case 18:case"end":return e.stop()}}),e,null,[[7,15]])})));return function(t,n,r,a){return e.apply(this,arguments)}}(),V={modules:{transport:[O.a,P.a],connEncryption:[v.NOISE],streamMuxer:[g.a],pubsub:m.a},addresses:{listen:["/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star"]},config:{pubsub:{enabled:!0}}};function X(){var e=s.a.useState(""),t=Object(j.a)(e,2),n=t[0],c=t[1],i=s.a.useState(),u=Object(j.a)(i,2),b=u[0],d=u[1],h=s.a.useState(!1),O=Object(j.a)(h,2),v=O[0],w=O[1],m=s.a.useState(),y=Object(j.a)(m,2),g=y[0],k=y[1],C=s.a.useState(),P=Object(j.a)(C,2),I=P[0],E=P[1],U=s.a.useState(),q=Object(j.a)(U,2),X=q[0],Y=q[1],Z=s.a.useState([]),$=Object(j.a)(Z,2),_=$[0],ee=$[1],te=s.a.useState(!1),ne=Object(j.a)(te,2),re=ne[0],ae=ne[1],ce=s.a.useState(!1),se=Object(j.a)(ce,2),ie=se[0],ue=se[1],oe=Object(B.a)(n).onCopy;s.a.useEffect((function(){be()}),[]);var pe=function(){var e=Object(l.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=8;break}return e.next=3,S.a.createFromPubKey(g);case 3:t=e.sent,n=K.a.keys.unmarshalPublicKey(t.marshalPubKey()),E(t),Y(n),ue(!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,S.a.create({bits:1024,keyType:"RSA"});case 3:if(t=e.sent,n=Object(p.a)(Object(p.a)({},V),{},{peerId:t}),!r||!r.isStarted){e.next=8;break}return e.next=8,r.stop();case 8:return e.next=10,x.a.create(n);case 10:return r=e.sent,e.next=13,r.handle("/encryptedChat/1.0",function(){var e=Object(l.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.stream,e.next=3,G(n,r);case 3:a=e.sent,ee((function(e){return[].concat(Object(o.a)(e),[{from:"them",message:a}])}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 13:return e.next=15,r.start();case 15:c(r.peerId.toJSON().pubKey),console.log("listening on: "+r.peerId.toB58String()),w(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=Object(l.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:H(b,r,I,X),ee((function(e){return[].concat(Object(o.a)(e),[{from:"me",message:b}])})),d("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)(D.b,{align:"center",w:"100vw",children:[!ie&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(N.a,{d:"flex",alignItems:"baseline",children:[Object(a.jsx)(R.a,{isLoaded:!v&&""!==n,children:Object(a.jsx)(J.a,{identifier:n})}),Object(a.jsx)(R.a,{isLoaded:!v&&""!==n,children:Object(a.jsxs)(N.a,{align:"center",children:[Object(a.jsx)(F.a,{value:n||""}),Object(a.jsx)(A.a,{mt:2,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",w:"200px",cursor:"pointer",onClick:oe,children:r&&r.peerId.toJSON().pubKey})]})})]}),Object(a.jsx)(M.a,{maxWidth:"300px",value:g,placeholder:"Peer's Public Key",type:"password",onChange:function(e){return k(e.target.value)}}),Object(a.jsxs)(D.a,{children:[Object(a.jsx)(W.a,{onClick:pe,children:"Find a friend"}),Object(a.jsx)(W.a,{onClick:function(){return ae(!0)},children:"Read QR Code"})]})]}),ie&&Object(a.jsxs)(N.a,{children:[Object(a.jsx)(N.a,{position:"absolute",height:"100%",w:"100vw",left:"0px",children:_.length>0&&_.map((function(e){return Object(a.jsxs)(D.a,{children:[Object(a.jsx)(J.a,{identifier:"me"===e.from?n:g,size:48}),Object(a.jsx)(A.a,{children:e.message})]})}))}),Object(a.jsxs)(D.a,{justifyContent:"center",spacing:3,position:"fixed",bottom:"0px",left:"0px",w:"100vw",children:[Object(a.jsx)(M.a,{opacity:"100%",bg:"white",placeholder:"Say something",maxWidth:"300px",value:b,onChange:function(e){return d(e.target.value)},onKeyPress:function(e){return"Enter"===e.key&&fe()}}),Object(a.jsx)(z.a,{"aria-label":"send message",isDisabled:""===b||!I,onClick:fe,icon:Object(a.jsx)(L.a,{})})]})]}),Object(a.jsx)(Q.a,{isOpen:re,onClose:function(){return ae(!1)},children:Object(a.jsx)(Q.d,{children:Object(a.jsx)(Q.c,{children:Object(a.jsx)(Q.b,{children:Object(a.jsx)(T.a,{delay:300,onError:function(e){return console.log(e)},onScan:function(e){k(e),e&&ae(!1)},style:{width:"100%"}})})})})})]})}var Y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,861)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))},Z=n(856);u.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Z.a,{children:Object(a.jsx)(X,{})})}),document.getElementById("root")),Y()}},[[835,1,2]]]);
//# sourceMappingURL=main.6427bd43.chunk.js.map